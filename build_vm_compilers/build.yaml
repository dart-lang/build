builders:
  modules:
    import: "package:build_modules/builders.dart"
    builder_factories:
      - metaModuleBuilderFactoryForPlatform('vm')
      - metaModuleCleanBuilderFactoryForPlatform('vm')
      - moduleBuilderFactoryForPlatform('vm')
    build_extensions:
      $lib$:
        - .vm.meta_module.raw
        - .vm.meta_module.clean
      .dart:
        - .vm.module
    is_optional: True
    auto_apply: all_packages
    required_inputs: [".dart", ".module.library"]
    applies_builders: ["|module_cleanup"]
  vm:
    import: "package:build_vm_compilers/builders.dart"
    builder_factories:
      - vmKernelModuleBuilder
    build_extensions:
      .dart:
        - .vm.dill
    is_optional: True
    auto_apply: all_packages
    required_inputs:
      - .dart
      - .vm.module
  entrypoint:
    import: "package:build_vm_compilers/builders.dart"
    builder_factories:
      - vmKernelEntrypointBuilder
    build_extensions:
      .dart:
        - .vm.app.dill
    required_inputs:
      - .dart
      - .vm.dill
      - .module
    build_to: cache
    auto_apply: root_package
    defaults:
      generate_for:
        include:
          - bin/**
          - tool/**
          - test/**.dart.vm_test.dart
          - example/**
          - benchmark/**
